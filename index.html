<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ovenly Delights by Saumya - Homemade Chocolates</title>
    <script src="//unpkg.com/alpinejs" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        chocolate: {
                            light: '#D2691E',
                            DEFAULT: '#8B4513',
                            dark: '#5D3A1A',
                        },
                        cream: {
                            light: '#FFF8E7',
                            DEFAULT: '#FAEBD7',
                            dark: '#F5DEB3',
                        },
                    },
                },
            },
        }
    </script>
    <style>
        /* Hide number input spinners */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type="number"] {
            -moz-appearance: textfield;
        }
    </style>
</head>

<body x-data="menu()" x-init="fetchMenuData" class="bg-cream-light min-h-screen">
    <header class="bg-chocolate text-cream-light py-8">
        <div class="container mx-auto text-center">
            <h1 class="text-4xl font-bold mb-2">Ovenly Delights by Saumya</h1>
            <p class="text-xl">Handcrafted Chocolates with Love</p>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <div class="menu-section lg:w-2/3">
                <template x-for="(category, categoryName) in items.bars" :key="categoryName">
                    <div class="card bg-cream shadow-xl mb-8">
                        <div class="card-body">
                            <h2 class="card-title text-2xl mb-4 text-chocolate-dark" x-text="categoryName"></h2>
                            <template x-for="item in category" :key="item.name">
                                <div
                                    class="flex flex-col sm:flex-row justify-between items-start sm:items-center py-4 border-b border-chocolate-light/30 last:border-b-0">
                                    <div class="flex-grow mb-2 sm:mb-0">
                                        <span class="font-semibold text-chocolate" x-text="item.name"></span>
                                        <p class="text-sm text-chocolate-dark/70" x-text="item.description"></p>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <span class="text-chocolate font-bold" x-text="'₹' + item.price"></span>
                                        <div class="join">
                                            <button
                                                class="btn btn-sm join-item bg-chocolate text-cream-light hover:bg-chocolate-dark"
                                                @click="decrementQuantity(item)">-</button>
                                            <input type="number" x-model="item.quantity"
                                                class="join-item w-14 text-center bg-cream-light text-chocolate appearance-none"
                                                readonly>
                                            <button
                                                class="btn btn-sm join-item bg-chocolate text-cream-light hover:bg-chocolate-dark"
                                                @click="incrementQuantity(item)">+</button>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </template>

                <div class="card bg-cream shadow-xl mb-8">
                    <div class="card-body">
                        <h2 class="card-title text-2xl mb-4 text-chocolate-dark">Assorted Collections</h2>
                        <template x-for="item in assortedCollections" :key="item.name">
                            <div
                                class="flex flex-col sm:flex-row justify-between items-start sm:items-center py-4 border-b border-chocolate-light/30 last:border-b-0">
                                <div class="flex-grow mb-2 sm:mb-0">
                                    <span class="font-semibold text-chocolate" x-text="item.name"></span>
                                    <p class="text-sm text-chocolate-dark/70" x-text="item.description"></p>
                                </div>
                                <div class="flex items-center gap-4">
                                    <span class="text-chocolate font-bold" x-text="'₹' + item.price"></span>
                                    <div class="join">
                                        <button
                                            class="btn btn-sm join-item bg-chocolate text-cream-light hover:bg-chocolate-dark"
                                            @click="decrementQuantity(item)">-</button>
                                        <input type="number" x-model="item.quantity"
                                            class="join-item w-14 text-center bg-cream-light text-chocolate appearance-none"
                                            readonly>
                                        <button
                                            class="btn btn-sm join-item bg-chocolate text-cream-light hover:bg-chocolate-dark"
                                            @click="incrementQuantity(item)">+</button>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>

            <div class="order-section lg:w-1/3">
                <div class="card bg-cream shadow-xl sticky top-4">
                    <div class="card-body">
                        <h2 class="card-title text-2xl mb-4 text-chocolate-dark">Order Summary</h2>
                        <template x-for="item in cartItems" :key="item.name">
                            <p class="text-chocolate"
                                x-text="item.name + ' x ' + item.quantity + ' = ₹' + (item.price * item.quantity)"></p>
                        </template>
                        <p class="text-lg font-bold mt-4 text-chocolate">Total: ₹<span x-text="cartTotal"></span></p>
                        <form id="orderForm" class="mt-4">
                            <input type="text" x-model="customerName" placeholder="Your Name" required
                                class="input input-bordered w-full mb-2 bg-cream-light text-chocolate placeholder-chocolate-light/70">
                            <button type="button"
                                class="btn w-full bg-chocolate text-cream-light hover:bg-chocolate-dark"
                                @click="sendWhatsAppOrder">Place Order via WhatsApp</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-chocolate-dark text-cream-light py-8">
        <div class="container mx-auto text-center">
            <p>All our chocolates are made with the finest ingredients and crafted with care.</p>
            <p class="mt-2">Please inquire about our seasonal specials and custom orders.</p>
        </div>
    </footer>

    <script>
        function menu() {
            return {
                items: { bars: {} },
                assortedCollections: [],
                customerName: '',
                fetchMenuData() {
                    fetch('chocolates.json')
                        .then(response => response.json())
                        .then(data => {
                            this.items = data;
                            Object.values(this.items.bars).forEach(category => {
                                category.forEach(item => item.quantity = 0);
                            });
                            this.assortedCollections = data.assortedCollections;
                            this.assortedCollections.forEach(item => item.quantity = 0);
                        })
                        .catch(error => console.error('Error loading menu data:', error));
                },
                incrementQuantity(item) {
                    item.quantity++;
                },
                decrementQuantity(item) {
                    if (item.quantity > 0) item.quantity--;
                },
                get cartItems() {
                    let allItems = [
                        ...Object.values(this.items.bars).flat(),
                        ...this.assortedCollections
                    ];
                    return allItems.filter(item => item.quantity > 0);
                },
                get cartTotal() {
                    return this.cartItems.reduce((total, item) => total + item.price * item.quantity, 0);
                },
                sendWhatsAppOrder() {
                    if (!this.customerName) {
                        alert('Please enter your name.');
                        return;
                    }

                    if (this.cartItems.length === 0) {
                        alert('Your cart is empty. Please add some items before placing an order.');
                        return;
                    }

                    let message = `Hello! This is ${this.customerName}. I'd like to place an order from chocolates.ovenlydelights.com:\n\n`;
                    this.cartItems.forEach(item => {
                        message += `${item.name} x ${item.quantity} = ₹${item.price * item.quantity}\n`;
                    });
                    message += `\n*Total: ₹${this.cartTotal}*`;
                    message += `\n\nPlease confirm availability and provide payment details. Thank you!`;

                    const encodedMessage = encodeURIComponent(message);
                    window.open(`https://wa.me/918700022184?text=${encodedMessage}`, '_blank');
                }
            }
        }
    </script>
</body>

</html>