<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <script
      src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload"
      data-no-instant
      defer
    ></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Your Own Chocolate Bar</title>

    <meta
      name="description"
      content="Indulge in exquisite handcrafted chocolates from Ovenly Delights by Saumya. Discover our range of artisanal dark, milk, and white chocolates made with love in India."
    />
    <meta
      name="keywords"
      content="homemade chocolates, artisanal chocolates, handcrafted chocolates, Indian chocolates, Ovenly Delights, Saumya chocolates"
    />
    <meta name="author" content="Saumya" />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://localhost:1313/create-your-own/" />
    <meta property="og:title" content="Create Your Own Chocolate Bar" />
    <meta
      property="og:description"
      content="Indulge in exquisite handcrafted chocolates from Ovenly Delights by Saumya. Discover our range of artisanal dark, milk, and white chocolates made with love in India."
    />

    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="http://localhost:1313/create-your-own/"
    />
    <meta property="twitter:title" content="Create Your Own Chocolate Bar" />
    <meta
      property="twitter:description"
      content="Indulge in exquisite handcrafted chocolates from Ovenly Delights by Saumya. Discover our range of artisanal dark, milk, and white chocolates made with love in India."
    />

    <link rel="icon" type="image/png" href="/assets/chef-hat.svg" />
    <link rel="apple-touch-icon" href="/assets/chef-hat.svg" />

    <link rel="canonical" href="http://localhost:1313/create-your-own/" />

    <script src="//unpkg.com/alpinejs" defer></script>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              chocolate: {
                light: "#D2691E",
                DEFAULT: "#8B4513",
                dark: "#5D3A1A",
              },
              cream: {
                light: "#FFFAF0",
                DEFAULT: "#FFF5E6",
                dark: "#FFE4B5",
              },
            },
            fontFamily: {
              sans: ["Lato", "sans-serif"],
              cursive: ["Sacramento", "cursive"],
            },
          },
        },
      };
    </script>

    <link
      rel="stylesheet"
      href="http://localhost:1313/css/main.min.3ce91322c684fbf32be5a9e68356af02b1263651a46a9887ae82d9b9fc7c9c4f.css"
    />

    <script>
      console.log("Script in baseof.html is running");

      function menu() {
        console.log("menu function is being defined");
        return {
          items: { bars: {} },
          assortedCollections: [],
          customerName: "",
          fetchMenuData() {
            const chocolatesData = JSON.parse({{ .Site.Data.chocolates | jsonify }});
            this.items = chocolatesData;
            if (this.items && this.items.bars) {
              Object.values(this.items.bars).forEach(category => {
                category.forEach(item => item.quantity = 0);
              });
            }
            if (this.items && this.items.assortedCollections) {
              this.assortedCollections = this.items.assortedCollections.map(item => ({
                ...item,
                quantities: {
                  "8": 0,
                  "9": 0,
                  "12": 0,
                  "16": 0,
                  "20": 0
                },
                selectedSize: "8",
                price: item.prices["8"]
              }));
            }
          },
          incrementQuantity(item, size) {
            if (size) {
              item.quantities[size]++;
              this.updateAssortedPrice(item);
            } else {
              item.quantity++;
            }
            this.$nextTick(() => this.updateComponent());
          },
          decrementQuantity(item, size) {
            if (size) {
              if (item.quantities[size] > 0) {
                item.quantities[size]--;
                this.updateAssortedPrice(item);
              }
            } else {
              if (item.quantity > 0) item.quantity--;
            }
            this.$nextTick(() => this.updateComponent());
          },
          updateAssortedPrice(item) {
            item.price = item.prices[item.selectedSize];
            this.$nextTick(() => {

              this.assortedCollections = [...this.assortedCollections];
            });
          },
          updateComponent() {
            this.assortedCollections = [...this.assortedCollections];
          },
          get cartItems() {
            let barItems = this.items && this.items.bars ? Object.values(this.items.bars).flat().filter(item => item.quantity > 0) : [];
            let assortedItems = this.assortedCollections ? this.assortedCollections.flatMap(item =>
              Object.entries(item.quantities)
                .filter(([size, quantity]) => quantity > 0)
                .map(([size, quantity]) => ({
                  name: item.name,
                  boxSize: size,
                  quantity: quantity,
                  price: item.prices[size]
                }))
            ) : [];
            return [...barItems, ...assortedItems];
          },
          get cartTotal() {
            return this.cartItems.reduce(
              (total, item) => total + item.price * item.quantity,
              0
            );
          },
          sendWhatsAppOrder() {
            const showModal = (message) => {
              document.getElementById("modalMessage").textContent = message;
              errorModal.showModal();
            };

            if (!this.customerName) {
              showModal('Please enter your name.');
              return;
            }

            if (this.cartItems.length === 0) {
              showModal('Your cart is empty. Please add some items before placing an order.');
              return;
            }

            let message = `Hello! This is ${this.customerName}. I'd like to place an order from chocolates.ovenlydelights.shop:\n\n`;
            this.cartItems.forEach(item => {
              if (item.boxSize) {
                message += `${item.name} (Box of ${item.boxSize}) x ${item.quantity} = ₹${item.price * item.quantity}\n`;
              } else {
                message += `${item.name} x ${item.quantity} = ₹${item.price * item.quantity}\n`;
              }
            });
            message += `\n*Total: ₹${this.cartTotal}*`;
            message += `\n\nPlease confirm availability and provide payment details. Thank you!`;

            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/918700022184?text=${encodedMessage}`, '_blank');
          }
        };
      }

      console.log("End of script in baseof.html");
    </script>
  </head>
  <body
    x-data="menu()"
    x-init="try { fetchMenuData() } catch (error) { console.error('Error fetching menu data:', error) }"
    class="bg-cream-light min-h-screen"
  >
    <script>
      console.log("Body of baseof.html is rendering");
    </script>
    <header class="bg-chocolate text-cream-light py-12">
      <div class="container mx-auto text-center">
        <h1 class="text-6xl font-bold mb-4 font-cursive">
          Ovenly Delights by Saumya
        </h1>
        <p class="text-2xl">Handcrafted Chocolates with Love</p>
      </div>
      <nav class="mt-4">
        <ul class="flex justify-center space-x-6">
          <li>
            <a href="/" class="text-cream-light hover:text-cream">Home</a>
          </li>
          <li>
            <a href="/create-your-own" class="text-cream-light hover:text-cream"
              >Create Your Own</a
            >
          </li>
        </ul>
      </nav>
    </header>
    <script>
      console.log("Before main content block");
    </script>

    <div class="container mx-auto px-4 py-8">
      <div class="prose max-w-none">
        <h1>Create Your Own Chocolate Bar</h1>
      </div>
    </div>

    <script>
      console.log("After main content block");
    </script>
    <footer class="bg-chocolate-dark text-cream-light py-8">
      <div class="container mx-auto text-center">
        <p>
          All our chocolates are made with the finest ingredients and crafted
          with care.
        </p>
        <p class="mt-2">
          Please inquire about our seasonal specials and custom orders.
        </p>
        <p class="mt-4">
          <a href="/privacy-policy" class="underline hover:text-cream"
            >Privacy Policy</a
          >
        </p>
      </div>
    </footer>
    <script src="//unpkg.com/alpinejs" defer></script>
    <script>
      console.log("End of body in baseof.html");
    </script>
  </body>
</html>
